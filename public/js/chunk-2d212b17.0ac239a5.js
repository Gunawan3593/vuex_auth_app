(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d212b17"],{aa01:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"12"}},[r("v-card",{staticClass:"elevation-12"},[r("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[r("v-toolbar-title",[t._v("Purchase Order List")]),r("v-tooltip",{attrs:{left:"",color:"blue"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[r("v-btn",t._g(t._b({attrs:{icon:"",color:"dee-orange",link:"",to:"/purchase/order/add"}},"v-btn",n,!1),a),[r("v-icon",[t._v("mdi-plus-thick")])],1)]}}])},[r("span",[t._v("Add New Transaction")])]),r("v-spacer"),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),r("v-card-text",[r("v-data-table",{attrs:{headers:t.headers,items:t.rows,search:t.search,page:t.page},on:{"update:page":function(e){t.page=e}},scopedSlots:t._u([{key:"item.cost",fn:function(e){var r=e.item;return[t._v(" "+t._s(t._f("currency")(r.cost))+" ")]}},{key:"item.price",fn:function(e){var r=e.item;return[t._v(" "+t._s(t._f("currency")(r.price))+" ")]}},{key:"item.active",fn:function(e){var a=e.item;return[a.active?r("v-icon",{attrs:{color:"blue",dark:""}},[t._v("mdi-check-circle")]):t._e(),a.active?t._e():r("v-icon",{attrs:{color:"red",dark:""}},[t._v("mdi-minus-circle")])]}},{key:"item.status",fn:function(e){var a=e.item;return[r("div",{staticClass:"d-flex justify-center"},[0==a.status?r("v-chip",{staticClass:"ma-1",attrs:{color:"primary"}},[t._v(" Pending ")]):t._e(),1==a.status?r("v-chip",{staticClass:"ma-1",attrs:{color:"orange","text-color":"white"}},[t._v(" Receiving ")]):t._e(),2==a.status?r("v-chip",{staticClass:"ma-1",attrs:{color:"purple","text-color":"white"}},[t._v(" Closed ")]):t._e(),3==a.status?r("v-chip",{staticClass:"ma-1",attrs:{color:"error"}},[t._v(" Void ")]):t._e(),4==a.status?r("v-chip",{staticClass:"ma-1",attrs:{color:"green","text-color":"white"}},[t._v(" Done ")]):t._e()],1)]}},{key:"item.actions",fn:function(e){var a=e.item;return[r("div",{staticClass:"d-flex justify-center"},[r("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[0==a.status?r("v-icon",t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},"v-icon",s,!1),n),[t._v(" mdi-pencil ")]):t._e()]}}],null,!0)},[r("span",[t._v("Edit")])]),r("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[2==a.status?r("v-icon",t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.genInvoice(a)}}},"v-icon",s,!1),n),[t._v(" mdi-file-move-outline ")]):t._e()]}}],null,!0)},[r("span",[t._v("Generate Invoice")])]),r("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[r("v-icon",t._g(t._b({attrs:{small:""},on:{click:function(e){return t.showItem(a)}}},"v-icon",s,!1),n),[t._v(" mdi-eye ")])]}}],null,!0)},[r("span",[t._v("Preview")])])],1)]}}],null,!0)})],1)],1)],1)],1)},n=[],s=(r("4160"),r("fb6a"),r("b0c0"),r("d3b7"),r("25f0"),r("159b"),r("96cf"),r("1da1")),c=r("5530"),i=r("2f62"),o={data:function(){return{search:"",page:1,headers:[{text:"No.",align:"start",sortable:!1,value:"no"},{text:"Date.",value:"transdate"},{text:"Supplier",value:"supplier.name"},{text:"Status",value:"status"},{text:"Actions",value:"actions",sortable:!1}],rows:[]}},computed:Object(c["a"])({},Object(i["c"])(["user"])),mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadData();case 2:r=t.$route.params.page,void 0!=r&&(t.page=parseInt(r));case 4:case"end":return e.stop()}}),e)})))()},created:function(){},methods:Object(c["a"])(Object(c["a"])({},Object(i["b"])(["getPurchaseOrder","genPurchaseInvoice","getPoItem"])),{},{editItem:function(t){this.$router.push({path:"/purchase/order/edit/"+t._id,query:{page:this.page}})},loadData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getPurchaseOrder();case 2:r=e.sent,r.data.success&&(t.rows=r.data.data,t.rows.forEach((function(e){e.transdate=t.getDateTime(e.transdate)})));case 4:case"end":return e.stop()}}),e)})))()},getDateTime:function(t){var e=new Date(t),r=e.getHours().toString(),a=e.getMinutes().toString(),n=e.getSeconds().toString(),s=("00"+r).substring(r.length)+":"+("00"+a).substring(a.length)+":"+("00"+n).substring(n.length);return e.toISOString().slice(0,10)+" "+s},showItem:function(t){this.$router.push({path:"/purchase/order/show/"+t._id,query:{page:this.page}})},genInvoice:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getItem(t._id);case 2:a=r.sent,n={transdate:e.getDateTime(new Date),supplier:t.supplier._id,order:t._id,notes:"Generate Invoice Automatically.",user:e.user._id,items:a},e.genPurchaseInvoice(n).then((function(t){t.data.success&&e.loadData()}));case 5:case"end":return r.stop()}}),r)})))()},getItem:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,n,s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={order:t},r.next=3,e.getPoItem(a);case 3:return n=r.sent,s=n.data.data,c=[],s.forEach((function(t){t={name:t.product.name,product:t.product._id,order_item:t._id,order_qty:t.qty,rcv_qty:t.rcv_qty,qty:t.rcv_qty,cost:t.cost},c.push(t)})),r.abrupt("return",c);case 8:case"end":return r.stop()}}),r)})))()}})},u=o,l=r("2877"),d=r("6544"),v=r.n(d),p=r("8336"),f=r("b0af"),m=r("99d9"),h=r("cc20"),_=r("62ad"),g=r("8fea"),b=r("132d"),w=r("0fd9"),y=r("2fa4"),k=r("8654"),x=r("71d9"),I=r("2a7f"),C=r("3a2f"),S=Object(l["a"])(u,a,n,!1,null,null,null);e["default"]=S.exports;v()(S,{VBtn:p["a"],VCard:f["a"],VCardText:m["b"],VChip:h["a"],VCol:_["a"],VDataTable:g["a"],VIcon:b["a"],VRow:w["a"],VSpacer:y["a"],VTextField:k["a"],VToolbar:x["a"],VToolbarTitle:I["a"],VTooltip:C["a"]})}}]);
//# sourceMappingURL=chunk-2d212b17.0ac239a5.js.map